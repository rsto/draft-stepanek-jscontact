<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE rfc SYSTEM "http://xml.resource.org/authoring/rfc2629.dtd"
[
  <!ENTITY RFC2119 PUBLIC ''
   'http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml'>
  <!ENTITY RFC6350 PUBLIC ''
   'http://xml.resource.org/public/rfc/bibxml/reference.RFC.6350.xml'>
  <!ENTITY RFC6473 PUBLIC ''
   'http://xml.resource.org/public/rfc/bibxml/reference.RFC.6473.xml'>
  <!ENTITY RFC6474 PUBLIC ''
   'http://xml.resource.org/public/rfc/bibxml/reference.RFC.6474.xml'>
  <!ENTITY RFC6715 PUBLIC ''
   'http://xml.resource.org/public/rfc/bibxml/reference.RFC.6715.xml'>
  <!ENTITY RFC6869 PUBLIC ''
   'http://xml.resource.org/public/rfc/bibxml/reference.RFC.6869.xml'>
  <!ENTITY RFC7095 PUBLIC ''
   'http://xml.resource.org/public/rfc/bibxml/reference.RFC.7095.xml'>  
  <!ENTITY RFC8259 PUBLIC ''
   'http://xml.resource.org/public/rfc/bibxml/reference.RFC.8259.xml'>
  <!ENTITY RFC8605 PUBLIC ''
   'http://xml.resource.org/public/rfc/bibxml/reference.RFC.8605.xml'>
]>
<?xml-stylesheet type="text/xsl" href="rfc2629.xslt"?>

<?rfc toc="yes"?>
<?rfc tocompact="yes"?>
<?rfc tocdepth="4"?>
<?rfc compact="yes"?>
<?rfc subcompact="yes"?>
<?rfc sortrefs="yes"?>
<?rfc symrefs="yes"?>
<?rfc iprnotified="no"?>

<rfc category="info" docName="draft-loffredo-jmap-jscontact-vcard-03" ipr="trust200902">
  <front>
    <title abbrev="jscontact-vcard">JSContact: Converting from and to vCard</title>
       
    <author fullname="Mario Loffredo" initials="M." surname="Loffredo">
      <organization>IIT-CNR/Registro.it</organization>
      <address>
        <postal>
          <street>Via Moruzzi,1</street>
          <city>Pisa</city>
          <country>IT</country>
          <code>56124</code>
        </postal>
        <email>mario.loffredo@iit.cnr.it</email>
        <uri>http://www.iit.cnr.it</uri>
      </address>
    </author>

    <author fullname="Robert Stepanek" initials="R." surname="Stepanek">
      <organization>FastMail</organization>
      <address>
        <postal>
          <street>PO Box 234, Collins St West</street>
          <city>Melbourne</city>
          <country>AU</country>
          <code>VIC 8007</code>
        </postal>
        <email>rsto@fastmailteam.com</email>
        <uri>https://www.fastmail.com</uri>
      </address>
    </author>

    <date/>
    <area>Applications</area>
    <workgroup>jmap</workgroup>
    <keyword>JSON</keyword>
    <keyword>contacts</keyword>
    <keyword>vCard</keyword>
    <keyword>jCard</keyword>
    
    <abstract>
      <t>This document provides informational guidance for converting the contact card defined by JSContact specification, namely JSCard, from and to vCard.</t>
    </abstract>
  </front>

  <middle>
    <section title="Introduction">

    <section title="Motivation">

      <t>The JSContact specification (<xref target="draft-ietf-jmap-jscontact"/>) has been defined to represent contact card information as a more efficient alternative to vCard (<xref target="RFC6350"/>) and its JSON format named jCard (<xref target="RFC7095"/>).</t>
      <t>While new applications might adopt JSContact as their main format to exchange contact card data, they are likely to interoperate with services and clients that just support vCard/jCard. Similarly, existing contact data providers and consumers already using vCard/jCard might want to represent their data also according to the JSContact specification.</t>
      <t>To facilitate this use cases, this document provides an informational guidance about how to convert the card defined in JSContact, namely JSCard, from and to vCard.</t>
    </section>

    <section title="Scope and Caveats">

      <t>JSContact and vCard have a lot of semantics in common, however some differences must be outlined:
       <list style="symbols">
      <t>The JSContact data model defines some contact information that doesn't have a direct mapping with vCard elements.<vspace blankLines='1' /></t>
      <t>The vCard specification includes some features (like parameters) that have been formally removed from JSCard due to a complete refactoring of vCard content. Anyway, the vCard parameters may appear as JSCard properties.<vspace blankLines='1' /></t>
      <t>Some vCard elements represented individually have been modeled as members of JSCard elements.<vspace blankLines='1' /></t>
      <t>The vCard custom elements, identified by the prefix &quot;x-&quot;, don't have a direct counterpart in the JSContact specification.</t>
      </list></t>

    </section>

      <section title="Conventions Used in This Document">
      	<t>The key words &quot;MUST&quot;, &quot;MUST NOT&quot;, &quot;REQUIRED&quot;, &quot;SHALL&quot;, &quot;SHALL NOT&quot;, &quot;SHOULD&quot;, &quot;SHOULD NOT&quot;, &quot;RECOMMENDED&quot;, &quot;MAY&quot;, and &quot;OPTIONAL&quot; in this document are to be interpreted as described in <xref target="RFC2119"/>.</t>
      </section>
   </section>

    <section title="Mapping">

      <t>This section contains the mapping between vCard and JSCard. The vCard properties are grouped according to the categories defined by <xref target="RFC6350"/>.</t>

      <section title="General Properties">

          <section title="BEGIN and END">
              <t>The vCard BEGIN and END elements don't have a direct match with corresponding JSCard elements.</t>
          </section>

          <section title="SOURCE">
          <t>The vCard SOURCE element is represented in JSCard as a &quot;Resource&quot; item of the &quot;online&quot; array (<xref target="source_mapping"/>). In the &quot;Resource&quot; item, the &quot;type&quot; member is set to &quot;uri&quot; as well as a key of the &quot;labels&quot; is set to &quot;source&quot;.</t>
            <t>The PREF and MEDIATYPE parameters can be represented by the &quot;isPreferred&quot; and &quot;mediaType&quot; properties respectively.</t>

            <figure anchor="source_mapping" title="SOURCE mapping example">
                <artwork xml:space="preserve"><![CDATA[
    BEGIN:VCARD
    VERSION:4.0
    ...
    SOURCE:http://directory.example.com/addressbooks/jdoe/Jean%20Dupont.vcf
    ...
    END:VCARD

    {
    ...
    "online":[
              ...
              {
               "type": "uri",
               "labels": { "source": true },
               "value": "http://directory.example.com/addressbooks/jdoe/Jean%20Dupont.vcf"
              },
              ...
            ],
    ...
    }
        ]]></artwork>
            </figure>
        </section>

        <section title="KIND">
          <t>The vCard KIND element is mapped onto the JSCard &quot;kind&quot; property (<xref target="kind_mapping"/>). Such property can contain one of the values, except &quot;group&quot;, described in section 6.1.4 of <xref target="RFC6350"/> and extended with the values declared in <xref target="RFC6473"/> and <xref target="RFC6869"/>. A group of cards is represented by a dedicated object named JSCardGroup.</t>

            <figure anchor="kind_mapping" title="KIND mapping example">
                <artwork xml:space="preserve"><![CDATA[
    BEGIN:VCARD
    VERSION:4.0
    ...
    KIND:individual
    ...
    END:VCARD

    {
    ...
    "kind": "individual",
    ...
    }
        ]]></artwork>
            </figure>
        </section>

          <section title="XML">
              <t>The vCard XML element doesn't have a direct match with a corresponding JSCard element.</t>
          </section>

      </section>

      <section title="Identification Properties">

          <section title="FN">
              <t>FN is converted into the &quot;fullName&quot; property. The presence of more than one name is implicitly associated with the translation of the full name in various languages regardless of the presence of the ALTID parameter. Each translation corresponds to a different entry of the &quot;localizations&quot; map that is an optional member of the &quot;fullName&quot; object (<xref target="fn_n_nickname_mapping"/>).</t>
          </section>

          <section title="N and NICKNAME">
              <t>The vCard elements N and NICKNAME are converted into equivalent items of the JSCard &quot;name&quot; array (<xref target="fn_n_nickname_mapping"/>):</t>
              <t><list style="symbols">
                  <t>the N components are transformed into related JSCard &quot;NameComponent&quot; items as reported in <xref target="n_components"/>; an item for each name component. Name components SHOULD be ordered such that their values joined by whitespace produce a valid full name of this entity;<vspace blankLines='1' /></t>
                  <t>NICKNAME is mapped onto an item whose &quot;type&quot; is &quot;nickname&quot;; an item for each nickname.</t>
              </list></t>

              <texttable anchor="n_components" title="N components mapping">
                  <ttcol align="left">N component</ttcol>
                  <ttcol align="left">&quot;type&quot; value</ttcol>
                  <c>Honorific Prefixes</c><c>prefix</c>
                  <c>Given Names</c><c>personal</c>
                  <c>Family Names</c><c>surname</c>
                  <c>Additional Names</c><c>additional</c>
                  <c>Honorific Suffixes</c><c>suffix</c>
              </texttable>

              <figure anchor="fn_n_nickname_mapping" title="FN, N, NICKNAME mapping example">
                  <artwork xml:space="preserve"><![CDATA[
    BEGIN:VCARD
    VERSION:4.0
    ...
    FN:Mr. John Q. Public\, Esq.
    N:Public;John;Quinlan;Mr.;Esq.
    NICKNAME:Johnny
    ...
    END:VCARD

    {
    ...
    "fullName":{
               "value": "Mr. John Q. Public, Esq."
               },
    "name":[
             { "value":"Mr.", "type": "prefix" },
             { "value":"John", "type": "personal" },
             { "value":"Public", "type": "surname" },
             { "value":"Quinlan", "type": "additional" },
             { "value":"Esq.", "type": "suffix" },
             { "value":"Johnny", "type": "nickname" }
           ],
    ...
    }
        ]]></artwork>
              </figure>
          </section>

          <section title="PHOTO">
              <t>The vCard PHOTO element is represented in JSCard as a &quot;Resource&quot; item of the &quot;online&quot; array (<xref target="photo_mapping"/>). In the &quot;Resource&quot; item, the &quot;type&quot; member is set to &quot;uri&quot; as well as a key of the &quot;labels&quot; is set to &quot;photo&quot;.</t>
              <t>The PREF and MEDIATYPE parameters can be represented by the &quot;isPreferred&quot; and &quot;mediaType&quot; properties respectively.</t>

              <figure anchor="photo_mapping" title="PHOTO mapping example">
                  <artwork xml:space="preserve"><![CDATA[
    BEGIN:VCARD
    VERSION:4.0
    ...
    PHOTO:http://www.example.com/pub/photos/jqpublic.gif
    ...
    END:VCARD

    {
    ...
    "online":[
              ...
              {
               "type": "uri",
               "labels": { "photo": true },
               "value": "http://www.example.com/pub/photos/jqpublic.gif"
              },
              ...
            ],
    ...
    }
        ]]></artwork>
              </figure>
          </section>

          <section title="BDAY, BIRTHPLACE, DEATHDATE, DEATHPLACE, ANNIVERSARY">
              <t>The vCard BDAY and ANNIVERSARY elements and the vCard extensions BIRTHPLACE, DEATHDATE, DEATHPLACE described in <xref target="RFC6350"/> are represented in JSCard as &quot;Anniversary&quot; items of the &quot;anniversaries&quot; array (<xref target="anniversary_mapping"/>):</t>
              <t><list style="symbols">
                  <t>BDAY and BIRTHPLACE are mapped onto &quot;date&quot; and &quot;place&quot; where &quot;type&quot; is set to &quot;birth&quot;<vspace blankLines='1' /></t>
                  <t>DEATHDATE and DEATHPLACE are mapped onto &quot;date&quot; and &quot;place&quot; where &quot;type&quot; is set to &quot;death&quot;<vspace blankLines='1' /></t>
                  <t>ANNIVERSARY is mapped onto &quot;date&quot; where &quot;type&quot; is set to &quot;other&quot; and &quot;label&quot; is set to a value describing in detail the kind of anniversary (e.g. &quot;marriage date&quot; for the wedding anniversary).</t>
              </list></t>

              <t>Both birth and death places are represented as instances of the Address object. The LANGUAGE parameter values of both BIRTHPLACE and DEATHPLACE elements can be expressed as corresponding entries of the &quot;localizations&quot; map included in the &quot;fullAddress&quot; object.</t>

              <figure anchor="anniversary_mapping" title="BDAY, BIRTHPLACE, DEATHDATE, DEATHPLACE, ANNIVERSARY mapping example">
                  <artwork xml:space="preserve"><![CDATA[
    BEGIN:VCARD
    VERSION:4.0
    ...
    BDAY:19531015T231000Z
    BIRTHPLACE:Mail Drop: TNE QB\n123 Main Street\nAny Town, CA 91921-1234\nU.S.A.
    DEATHDATE:19960415
    DEATHPLACE:4445 Courtright Street\nNew England, ND 58647\nU.S.A.
    ANNIVERSARY:19860201
    ...
    END:VCARD

    {
    ...
    "anniversaries":[
              {
               "type": "birth",
               "date": "19531015T231000Z",
               "place":
                      {
                      "fullAddress":
                                  {
                                   "value": "Mail Drop: TNE QB\n123 Main Street\nAny Town, CA 91921-1234\nU.S.A."
                                  }
                      }
              },
              {
               "type": "birth",
               "date": "19531015T231000Z",
               "place":
                      {
                      "fullAddress":
                                  {
                                   "value": "4445 Courtright Street\nNew England, ND 58647\nU.S.A."
                                  }
                      }
              },
              {
               "type": "other",
               "label": "marriage date",
               "date": "19860201"
              }
            ],
    ...
    }
        ]]></artwork>
              </figure>
          </section>

          <section title="GENDER">
                <t>TBD</t>
          </section>

      </section>

      <section title="Delivery Addressing Properties">

          <section title="ADR">
              <t>The vCard ADR element is represented in JSCard as an &quot;Address&quot; item of the &quot;addresses&quot; array (<xref target="adr_mapping"/>).</t>
              <t>The ADR components are transformed into the &quot;Address&quot; properties as reported in <xref target="adr_components"/>.</t>

              <texttable anchor="adr_components" title="ADR components mapping">
                  <ttcol align="left">ADR component</ttcol>
                  <ttcol align="left">Address property</ttcol>
                  <c>p.o. box</c><c>postOfficeBox</c>
                  <c>extended address</c><c>extension</c>
                  <c>street address</c><c>street</c>
                  <c>locality</c><c>locality</c>
                  <c>region</c><c>region</c>
                  <c>postal code</c><c>postcode</c>
                  <c>country name</c><c>country</c>
              </texttable>

              <t>The LABEL parameter is converted into the &quot;fullAddress&quot; property.</t>
              <t>The PREF parameter is converted into the &quot;isPreferred&quot; property.</t>
              <t>The GEO parameter is converted into the &quot;coordinates&quot; property.</t>
              <t>The TZ parameter is converted into by the &quot;timeZone&quot; property.</t>
              <t>The TYPE parameter is converted into the &quot;context&quot; property. The &quot;home&quot; value is replaced by the &quot;private&quot; value.</t>
              <t>The LANGUAGE parameter values can be represented as different entries of the &quot;localizations&quot; map that is an optional member of the &quot;fullAddress&quot; object.</t>
              <t>The CC parameter defined by <xref target="RFC8605"/> is converted into the &quot;countryCode&quot; property.</t>

              <figure anchor="adr_mapping" title="ADR mapping example">
                  <artwork xml:space="preserve"><![CDATA[
    BEGIN:VCARD
    VERSION:4.0
    ...
    ADR;TYPE=work;CC=US:;;54321 Oak St;Reston;VA;20190;USA
    ADR;TYPE=home;CC=US:;;12345 Elm St;Reston;VA;20190;USA
    ...
    END:VCARD

    {
    ...
    "addresses": [
          {
           "context": "work",
           "fullAddress":
                        {
                         "value": "54321 Oak St\nReston\nVA\n20190\nUSA"
                        },
           "street": "54321 Oak St",
           "locality": "Reston",
           "region": "VA",
           "country": "USA",
           "postcode": "20190",
           "countryCode": "US"
          },
          {
           "context": "private",
           "fullAddress":
                        {
                         "value": "12345 Elm St\nReston\nVA\n20190\nUSA"
                        },
           "street": "12345 Elm St",
           "locality": "Reston",
           "region": "VA",
           "country": "USA",
           "postcode": "20190",
           "countryCode": "US"
          }
    ]
    ...
    }
        ]]></artwork>
              </figure>
          </section>
      </section>

      <section title="Communications Properties">

          <section title="TEL">
              <t>The vCard TEL element is represented in JSCard as a &quot;Resource&quot; item of the &quot;phones&quot; array (<xref target="tel_mapping"/>). The vCard &quot;type-param-tel&quot; values are represented by the &quot;type&quot; member. Those vCard &quot;type-param-tel&quot; values that don't have a counterpart in the &quot;type&quot; member values are represented as keys of the &quot;labels&quot; map. The &quot;type-param&quot; values are represented by the &quot;context&quot; member. The &quot;home&quot; value is replaced by the &quot;private&quot; value.</t>
              <t>The PREF parameter can be represented by the &quot;isPreferred&quot; member.</t>

              <figure anchor="tel_mapping" title="TEL mapping example">
                  <artwork xml:space="preserve"><![CDATA[
    BEGIN:VCARD
    VERSION:4.0
    ...
    TEL;VALUE=uri;PREF=1;TYPE="voice,home":tel:+1-555-555-5555;ext=5555
    TEL;VALUE=uri;TYPE=home:tel:+33-01-23-45-67
    ...
    END:VCARD

    {
    ...
    "phones":[
              {
               "context": "private",
               "type": "voice",
               "value": "tel:+1-555-555-5555;ext=5555",
               "isPreferred": true
              },
              {
               "context": "private",
               "value": "tel:+33-01-23-45-67"
              }
            ],
    ...
    }
        ]]></artwork>
              </figure>
          </section>

          <section title="EMAIL">
              <t>The vCard EMAIL element is represented in JSCard as a &quot;Resource&quot; item of the &quot;emails&quot; array (<xref target="email_mapping"/>). The vCard &quot;type-param&quot; values are represented by the &quot;context&quot; member. The &quot;home&quot; value is replaced by the &quot;private&quot; value.</t>
              <t>The PREF parameter can be represented by the &quot;isPreferred&quot; member.</t>

              <figure anchor="email_mapping" title="EMAIL mapping example">
                  <artwork xml:space="preserve"><![CDATA[
    BEGIN:VCARD
    VERSION:4.0
    ...
    EMAIL;TYPE=work:jqpublic@xyz.example.com
    EMAIL;PREF=1:jane_doe@example.com
    ...
    END:VCARD

    {
    ...
    "emails":[
              {
               "context": "work",
               "value": "jqpublic@xyz.example.com",
              },
              {
               "context": "private",
               "value": "jane_doe@example.com"
               "isPreferred": true
              }
            ],
    ...
    }
        ]]></artwork>
              </figure>
          </section>

          <section title="IMPP">
              <t>The vCard IMPP element is represented in JSCard as a &quot;Resource&quot; item of the &quot;online&quot; array (<xref target="impp_mapping"/>). In the &quot;Resource&quot; item, the &quot;type&quot; member is set to &quot;username&quot; as well as a key of the &quot;labels&quot; is set to &quot;XMPP&quot;.</t>
              <t>The PREF and MEDIATYPE parameters can be represented by the &quot;isPreferred&quot; and &quot;mediaType&quot; properties respectively.</t>

              <figure anchor="impp_mapping" title="IMPP mapping example">
                  <artwork xml:space="preserve"><![CDATA[
    BEGIN:VCARD
    VERSION:4.0
    ...
    IMPP;PREF=1:xmpp:alice@example.com
    ...
    END:VCARD

    {
    ...
    "online":[
              ...
              {
               "type": "username",
               "labels": { "XMPP": true },
               "value": "alice@example.com"
              },
              ...
            ],
    ...
    }
        ]]></artwork>
              </figure>
          </section>

          <section title="LANG">
              <t>The vCard LANG element is represented through the JSCard &quot;preferredContactLanguages&quot; map (<xref target="lang_mapping"/>): an entry for each language that may be used for contacting the entity associated with the JSCard. The entry keys correspond to the language tags, the corresponding entry values are arrays of ContactLanguage items.</t>
              <t>The TYPE and PREF parameters can be represented by the ContactLanguage properties &quot;type&quot; and &quot;preference&quot; respectively.</t>
              <t>If both PREF and TYPE parameters are missing, the array of ContactLanguage items MUST be empty.</t>

              <figure anchor="lang_mapping" title="LANG mapping example">
                  <artwork xml:space="preserve"><![CDATA[
    BEGIN:VCARD
    VERSION:4.0
    ...
    LANG;TYPE=work;PREF=1:en
    LANG;TYPE=work;PREF=2:fr
    LANG;TYPE=home:fr
    ...
    END:VCARD

    {
    ...
    "preferredContactLanguages" : {
                                   "en": [
                                          {
                                           "type": "work",
                                           "preference": 1
                                          }
                                         ],
                                   "fr": [
                                          {
                                           "type": "work",
                                           "preference": 2
                                          },
                                          {
                                           "type": "home",
                                          }
                                         ]
                                  },
    ...
    }
        ]]></artwork>
              </figure>
          </section>
      </section>

      <section title="Geographical Properties">
        <t>The GEO and TZ elements are not directly mapped into equivalent topmost JSCard elements because the same information is represented through equivalent &quot;Address&quot; properties.</t>
          <t>The ALTID parameter is used for associating both GEO and TZ elements with the related address information.</t>
      </section>

      <section title="Organizational Properties">

          <section title="TITLE">
              <t>The vCard TITLE element is mapped onto the JSCard &quot;jobTitle&quot; array; an item for each title (<xref target="title_mapping"/>).</t>
              <t>The ALTID parameter is used to distinguish between a new element and a new language-dependent alternative of a fixed element.</t>
              <t>The LANGUAGE parameter values can be expressed as corresponding entries of the &quot;localizations&quot; map included in each &quot;LocalizedString&quot; item.</t>

              <figure anchor="title_mapping" title="TITLE mapping example">
                  <artwork xml:space="preserve"><![CDATA[
    BEGIN:VCARD
    VERSION:4.0
    ...
    TITLE:Research Scientist
    ...
    END:VCARD

    {
    ...
    "jobTitle":[
                {
                 "value": "Research Scientist"
                }
               ],
    ...
    }
        ]]></artwork>
              </figure>
          </section>

          <section title="ROLE">
              <t>The vCard ROLE element is mapped onto the JSCard &quot;role&quot; array; an item for each role (<xref target="role_mapping"/>).</t>
              <t>The LANGUAGE parameter values can be expressed as corresponding entries of the &quot;localizations&quot; map included in each &quot;Resource&quot; item.</t>

              <figure anchor="role_mapping" title="ROLE mapping example">
                  <artwork xml:space="preserve"><![CDATA[
    BEGIN:VCARD
    VERSION:4.0
    ...
    ROLE:Project Leader
    ...
    END:VCARD

    {
    ...
    "role":[
            {
             "value": "Project Leader"
            }
           ],
    ...
    }
        ]]></artwork>
              </figure>
          </section>

          <section title="LOGO">
              <t>The vCard LOGO element is represented in JSCard as a &quot;Resource&quot; item of the &quot;online&quot; array (<xref target="logo_mapping"/>). In the &quot;Resource&quot; item, the &quot;type&quot; member is set to &quot;uri&quot; as well as a key of the &quot;labels&quot; is set to &quot;logo&quot;.</t>
              <t>The PREF and MEDIATYPE parameters can be represented by the &quot;isPreferred&quot; and &quot;mediaType&quot; properties respectively.</t>

              <figure anchor="logo_mapping" title="LOGO mapping example">
                  <artwork xml:space="preserve"><![CDATA[
    BEGIN:VCARD
    VERSION:4.0
    ...
    LOGO:http://www.example.com/pub/logos/abccorp.jpg
    ...
    END:VCARD

    {
    ...
    "online":[
              ...
              {
               "type": "uri",
               "labels": { "logo": true },
               "value": "http://www.example.com/pub/logos/abccorp.jpg"
              },
              ...
            ],
    ...
    }
        ]]></artwork>
              </figure>
          </section>

          <section title="ORG">
              <t>The vCard ORG element is mapped onto the JSCard &quot;organization&quot; array; an item for each organization (<xref target="org_mapping"/>). The organization name includes the organizational units if any.</t>
              <t>The ALTID parameter is used to distinguish between a new element and a new language-dependent alternative of a fixed element.</t>
              <t>The LANGUAGE parameter values can be expressed as corresponding entries of the &quot;localizations&quot; map included in each &quot;LocalizedString&quot; item.</t>

              <figure anchor="org_mapping" title="ORG mapping example">
                  <artwork xml:space="preserve"><![CDATA[
    BEGIN:VCARD
    VERSION:4.0
    ...
    ORG:ABC\, Inc.;North American Division;Marketing
    ...
    END:VCARD

    {
    ...
    "organization":[
                {
                 "value": "ABC, Inc.;North American Division;Marketing"
                 }
                ],
    ...
    }
        ]]></artwork>
              </figure>
          </section>

          <section title="MEMBER">
              <t>According to the JSContact specification, a group of contact cards is represented by a dedicated object named JSCardGroup (<xref target="group_example"/>). The contact cards composing the group are included in the &quot;cards&quot; array. Therefore, the vCard MEMBER element doesn't have a direct match with a corresponding JSCard element.</t>

              <figure anchor="group_example" title="Group example">
                  <artwork xml:space="preserve"><![CDATA[
    BEGIN:VCARD
    VERSION:4.0
    KIND:group
    FN:The Doe family
    MEMBER:urn:uuid:03a0e51f-d1aa-4385-8a53-e29025acd8af
    MEMBER:urn:uuid:b8767877-b4a1-4c70-9acc-505d3819e519
    END:VCARD
    BEGIN:VCARD
    VERSION:4.0
    FN:John Doe
    UID:urn:uuid:03a0e51f-d1aa-4385-8a53-e29025acd8af
    END:VCARD
    BEGIN:VCARD
    VERSION:4.0
    FN:Jane Doe
    UID:urn:uuid:b8767877-b4a1-4c70-9acc-505d3819e519
    END:VCARD

    {
    "uid": "urn:uuid:ab4310aa-fa43-11e9-8f0b-362b9e155667",
    "name": "The Doe family",
    "cards": [
              {
               "name": {
                        "fullName": {
                                     "value": "John Doe"
                                    }
                       },
               "uid": "urn:uuid:03a0e51f-d1aa-4385-8a53-e29025acd8af"
              },
              {
               "name": {
                        "fullName": {
                                     "value": "Jane Doe"
                                    }
                       },
               "uid": "urn:uuid:b8767877-b4a1-4c70-9acc-505d3819e519f"
              }
             ]
    }
        ]]></artwork>
              </figure>
          </section>


          <section title="RELATED">
              <t>The vCard RELATED element is converted into the &quot;relatedTo&quot; map (<xref target="related_mapping"/>): an entry for each entity the entity described by the JSCard is associated with. The map keys are the UUIDs of the associated cards.</t>
              <t>Each map value is an object including only the &quot;relation&quot; property represented as a set of relation types described in section 6.6.6 of <xref target="RFC6350"/>.</t>
              <t>If the relation type is unspecified, the &quot;relation&quot; is empty.</t>

              <figure anchor="related_mapping" title="RELATED mapping example">
                  <artwork xml:space="preserve"><![CDATA[
    BEGIN:VCARD
    VERSION:4.0
    ...
    RELATED;TYPE=friend:urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6
    RELATED;TYPE=contact:http://example.com/directory/jdoe.vcf
    RELATED;VALUE=text:Please contact my assistant Jane Doe for any inquiries.
    ...
    END:VCARD

    {
    ...
    "relatedTo":{
                  {
                   "urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6":
                        {
                         "relation": {
                                      "friend": true
                                     }
                        }
                  },
                  {
                   "http://example.com/directory/jdoe.vcf":
                        {
                         "relation": {
                                      "contact": true
                                     }
                        }
                  },
                  {
                   "Please contact my assistant Jane Doe for any inquiries.":
                        {
                         "relation": { }
                        }
                  }
                }
    ...
    }
        ]]></artwork>
              </figure>
          </section>

          <section title="CONTACT-URI">
              <t>The vCard CONTACT-URI element defined by <xref target="RFC8605"/> is represented in JSCard as a &quot;Resource&quot; item of the &quot;online&quot; array (<xref target="contact_uri_mapping"/>). In the &quot;Resource&quot; item, the &quot;type&quot; member is set to &quot;uri&quot; as well as a key of the &quot;labels&quot; is set to &quot;contact-uri&quot;.</t>
              <t>The PREF parameter can be represented by the &quot;isPreferred&quot; property.</t>

              <figure anchor="contact_uri_mapping" title="CONTACT-URI mapping example">
                  <artwork xml:space="preserve"><![CDATA[
    BEGIN:VCARD
    VERSION:4.0
    ...
    CONTACT-URI;PREF=1:mailto:contact@example.com
    ...
    END:VCARD

    {
    ...
    "online":[
              ...
              {
               "type": "uri",
               "labels": { "contact-uri": true },
               "value": "mailto:contact@example.com",
               "isPreferred": true
              },
              ...
            ],
    ...
    }
        ]]></artwork>
              </figure>
          </section>
      </section>

      <section title="Personal Information Properties">

          <section title="EXPERTISE">
              <t>The vCard EXPERTISE element defined by <xref target="RFC6715"/> is represented in JSCard as a &quot;PersonalInformation&quot; item of the &quot;personalInfo&quot; array (<xref target="expertise_mapping"/>). The &quot;type&quot; property is set to &quot;expertise&quot;.</t>
              <t>The LEVEL parameter can be represented by the &quot;level&quot; property with following mapping:</t>
              <t><list style="symbols">
                  <t>&quot;beginner&quot; is converted into &quot;low&quot;;</t>
                  <t>&quot;average&quot; is converted into &quot;medium&quot;;</t>
                  <t>&quot;expert&quot; is converted into &quot;high&quot;.</t>
              </list></t>
              <t>The INDEX parameter is represented by the position of the expertise among the declared expertises.</t>

              <figure anchor="expertise_mapping" title="EXPERTISE mapping example">
                  <artwork xml:space="preserve"><![CDATA[
    BEGIN:VCARD
    VERSION:4.0
    ...
    EXPERTISE;LEVEL=beginner;INDEX=2:chinese literature
    EXPERTISE;INDEX=1;LEVEL=expert:chemistry
    ...
    END:VCARD

    {
    ...
    "personalInfo":[
                    ...
                    {
                     "type": "expertise",
                     "value": "chemistry",
                     "level": "high"
                    },
                    {
                     "type": "expertise",
                     "value": "chinese literature",
                     "level": "low"
                    }
                    ...
                   ]
    ...
    }
        ]]></artwork>
              </figure>
          </section>

          <section title="HOBBY">
              <t>The vCard HOBBY element defined by <xref target="RFC6715"/> is represented in JSCard as a &quot;PersonalInformation&quot; item of the &quot;personalInfo&quot; array (<xref target="hobby_mapping"/>). The &quot;type&quot; property is set to &quot;hobby&quot;.</t>
              <t>The LEVEL parameter can be represented by the &quot;level&quot; property with a direct mapping.</t>
              <t>The INDEX parameter is represented by the position of the hobby among the declared hobbies.</t>

              <figure anchor="hobby_mapping" title="HOBBY mapping example">
                  <artwork xml:space="preserve"><![CDATA[
    BEGIN:VCARD
    VERSION:4.0
    ...
    HOBBY;INDEX=1;LEVEL=high:reading
    HOBBY;INDEX=2;LEVEL=high:sewing
    ...
    END:VCARD

    {
    ...
    "personalInfo":[
                    ...
                    {
                     "type": "hobby",
                     "value": "reading",
                     "level": "high"
                    },
                    {
                     "type": "hobby",
                     "value": "sewing",
                     "level": "high"
                    }
                    ...
                   ]
    ...
    }
        ]]></artwork>
              </figure>
          </section>

          <section title="INTEREST">
              <t>The vCard INTEREST element defined by <xref target="RFC6715"/> is represented in JSCard as a &quot;PersonalInformation&quot; item of the &quot;personalInfo&quot; array (<xref target="interest_mapping"/>). The &quot;type&quot; property is set to &quot;interest&quot;.</t>
              <t>The LEVEL parameter can be represented by the &quot;level&quot; property with a direct mapping.</t>
              <t>The INDEX parameter is represented by the position of the interest among the declared interests.</t>

              <figure anchor="interest_mapping" title="INTEREST mapping example">
                  <artwork xml:space="preserve"><![CDATA[
    BEGIN:VCARD
    VERSION:4.0
    ...
    INTEREST;INDEX=1;LEVEL=medium:r&b music
    INTEREST;INDEX=2;LEVEL=high:rock ’n’ roll music
    ...
    END:VCARD

    {
    ...
    "personalInfo":[
                    ...
                    {
                     "type": "interest",
                     "value": "r&b music",
                     "level": "medium"
                    },
                    {
                     "type": "interest",
                     "value": "rock ’n’ roll music",
                     "level": "high"
                    }
                    ...
                   ]
    ...
    }
        ]]></artwork>
              </figure>
          </section>

          <section title="ORG-DIRECTORY">
              <t>The vCard ORG-DIRECTORY element is represented in JSCard as a &quot;Resource&quot; item of the &quot;online&quot; array (<xref target="org_directory_mapping"/>). In the &quot;Resource&quot; item, the &quot;type&quot; member is set to &quot;uri&quot; as well as a key of the &quot;labels&quot; is set to &quot;org-directory&quot;.</t>
              <t>The PREF parameter can be represented by the &quot;isPreferred&quot; property.</t>
              <t>The INDEX parameter is represented by the position of the directory among the online resources with the &quot;org-directory&quot; key in the &quot;labels&quot; map.</t>

              <figure anchor="org_directory_mapping" title="ORG-DIRECTORY mapping example">
                  <artwork xml:space="preserve"><![CDATA[
    BEGIN:VCARD
    VERSION:4.0
    ...
    ORG-DIRECTORY;INDEX=1:http://directory.mycompany.example.com
    ORG-DIRECTORY;PREF=1:ldap://ldap.tech.example/o=Example%20Tech,ou=Engineering
    ...
    END:VCARD

    {
    ...
    "online":[
              ...
              {
               "type": "uri",
               "labels": { "org-directory": true },
               "value": "http://directory.mycompany.example.com"
              },
              {
               "type": "uri",
               "labels": { "org-directory": true },
               "value": "ldap://ldap.tech.example/o=Example%20Tech,ou=Engineering",
               "isPreferred": true
              },
              ...
            ],
    ...
    }
        ]]></artwork>
              </figure>
          </section>
      </section>

      <section title="Explanatory Properties">

          <section title="CATEGORIES">
              <t>The vCard CATEGORIES element is converted into the JSCard &quot;categories&quot; array (<xref target="categories_mapping"/>); an item for each category.</t>

              <figure anchor="categories_mapping" title="CATEGORIES mapping example">
                  <artwork xml:space="preserve"><![CDATA[
    BEGIN:VCARD
    VERSION:4.0
    ...
    CATEGORIES:INTERNET,IETF,INDUSTRY,INFORMATION TECHNOLOGY
    ...
    END:VCARD

    {
    ...
    "categories":[
                  "INTERNET",
                  "IETF",
                  "INDUSTRY",
                  "INFORMATION TECHNOLOGY"
                 ]
    ...
    }
        ]]></artwork>
              </figure>
          </section>


          <section title="NOTE">
              <t>The vCard NOTE element is mapped onto the JSCard &quot;notes&quot; array (<xref target="notes_mapping"/>); an item for each note.</t>
              <t>The ALTID parameter is used to distinguish between a new element and a new language-dependent alternative of a fixed element.</t>
              <t>The LANGUAGE parameter values can be expressed as corresponding entries of the &quot;localizations&quot; map included in each &quot;LocalizedString&quot; item.</t>

              <figure anchor="notes_mapping" title="NOTE mapping example">
                  <artwork xml:space="preserve"><![CDATA[
    BEGIN:VCARD
    VERSION:4.0
    ...
    NOTE:This fax number is operational 0800 to 1715 EST\, Mon-Fri.
    ...
    END:VCARD

    {
    ...
    "notes":[
             {
              "value": "This fax number is operational 0800 to 1715 EST, Mon-Fri."
             }
            ]
    ...
    }
        ]]></artwork>
              </figure>
          </section>

          <section title="PRODID">
              <t>The vCard PRODID element is converted into the JSCard &quot;prodId&quot; property (<xref target="prodid_mapping"/>).</t>

              <figure anchor="prodid_mapping" title="PRODID mapping example">
                  <artwork xml:space="preserve"><![CDATA[
    BEGIN:VCARD
    VERSION:4.0
    ...
    PRODID:-//ONLINE DIRECTORY//NONSGML Version 1//EN
    ...
    END:VCARD

    {
    ...
    "prodId": "-//ONLINE DIRECTORY//NONSGML Version 1//EN"
    ...
    }
        ]]></artwork>
              </figure>
          </section>


          <section title="REV">
              <t>The vCard REV element is transformed into the JSCard &quot;updated&quot; property (<xref target="rev_mapping"/>).</t>

              <figure anchor="rev_mapping" title="REV mapping example">
                  <artwork xml:space="preserve"><![CDATA[
    BEGIN:VCARD
    VERSION:4.0
    ...
    REV:19951031T222710Z
    ...
    END:VCARD

    {
    ...
    "updated": "19951031T222710Z"
    ...
    }
        ]]></artwork>
              </figure>
          </section>

          <section title="SOUND">
              <t>The vCard SOUND element is represented in JSCard as a &quot;Resource&quot; item of the &quot;online&quot; array (<xref target="sound_mapping"/>). In the &quot;Resource&quot; item, the &quot;type&quot; member is set to &quot;uri&quot; as well as a key of the &quot;labels&quot; is set to &quot;sound&quot;.</t>
              <t>The PREF and MEDIATYPE parameters can be represented by the &quot;isPreferred&quot; and &quot;mediaType&quot; properties respectively.</t>

              <figure anchor="sound_mapping" title="SOUND mapping example">
                  <artwork xml:space="preserve"><![CDATA[
    BEGIN:VCARD
    VERSION:4.0
    ...
    SOUND:CID:JOHNQPUBLIC.part8.19960229T080000.xyzMail@example.com
    ...
    END:VCARD

    {
    ...
    "online":[
              ...
              {
               "type": "uri",
               "labels": { "sound": true },
               "value": "CID:JOHNQPUBLIC.part8.19960229T080000.xyzMail@example.com"
              },
              ...
            ],
    ...
    }
        ]]></artwork>
              </figure>
          </section>

          <section title="UID">
              <t>The vCard UID element corresponds to the JSCard &quot;uid&quot; property (<xref target="uid_mapping"/>).</t>

              <figure anchor="uid_mapping" title="UID mapping example">
                  <artwork xml:space="preserve"><![CDATA[
    BEGIN:VCARD
    VERSION:4.0
    ...
    UID:urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6
    ...
    END:VCARD

    {
    ...
    "uid": "urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
    ...
    }
        ]]></artwork>
              </figure>
          </section>

          <section title="PID Parameter and CLIENTPIDMAP">
            <t>TBD</t>
          </section>

          <section title="URL">
              <t>The vCard URL element is represented in JSCard as a &quot;Resource&quot; item of the &quot;online&quot; array (<xref target="url_mapping"/>). In the &quot;Resource&quot; item, the &quot;type&quot; member is set to &quot;uri&quot; as well as a key of the &quot;labels&quot; is set to &quot;url&quot;.</t>
              <t>The PREF and MEDIATYPE parameters can be represented by the &quot;isPreferred&quot; and &quot;mediaType&quot; properties respectively.</t>

              <figure anchor="url_mapping" title="URL mapping example">
                  <artwork xml:space="preserve"><![CDATA[
    BEGIN:VCARD
    VERSION:4.0
    ...
    URL:http://example.org/restaurant.french/~chezchic.html
    ...
    END:VCARD

    {
    ...
    "online":[
              ...
              {
               "type": "uri",
               "labels": { "url": true },
               "value": "http://example.org/restaurant.french/~chezchic.html"
              },
              ...
            ],
    ...
    }
        ]]></artwork>
              </figure>
          </section>

          <section title="VERSION">
              <t>The vCard VERSION element doesn't have a direct match with a corresponding JSCard element.</t>
          </section>

      </section>

      <section title="Security Properties">
          <section title="KEY">
              <t>The vCard KEY element is represented in JSCard as a &quot;Resource&quot; item of the &quot;online&quot; array (<xref target="key_mapping"/>). In the &quot;Resource&quot; item, the &quot;type&quot; member is set to &quot;uri&quot; as well as a key of the &quot;labels&quot; is set to &quot;key&quot;.</t>
              <t>The PREF and MEDIATYPE parameters can be represented by the &quot;isPreferred&quot; and &quot;mediaType&quot; properties respectively.</t>

              <figure anchor="key_mapping" title="KEY mapping example">
                  <artwork xml:space="preserve"><![CDATA[
    BEGIN:VCARD
    VERSION:4.0
    ...
    KEY:http://www.example.com/keys/jdoe.cer
    ...
    END:VCARD

    {
    ...
    "online":[
              ...
              {
               "type": "uri",
               "labels": { "key": true },
               "value": "http://www.example.com/keys/jdoe.cer"
              },
              ...
            ],
    ...
    }
        ]]></artwork>
              </figure>
         </section>
      </section>


      <section title="Calendar Properties">

          <section title="FBURL">
              <t>The vCard FBURL element is represented in JSCard as a &quot;Resource&quot; item of the &quot;online&quot; array (<xref target="fburl_mapping"/>). In the &quot;Resource&quot; item, the &quot;type&quot; member is set to &quot;uri&quot; as well as a key of the &quot;labels&quot; is set to &quot;fburl&quot;.</t>
              <t>The PREF and MEDIATYPE parameters can be represented by the &quot;isPreferred&quot; and &quot;mediaType&quot; properties respectively.</t>

              <figure anchor="fburl_mapping" title="FBURL mapping example">
                  <artwork xml:space="preserve"><![CDATA[
    BEGIN:VCARD
    VERSION:4.0
    ...
    FBURL;PREF=1:http://www.example.com/busy/janedoe
    FBURL;MEDIATYPE=text/calendar:ftp://example.com/busy/project-a.ifb
    ...
    END:VCARD

    {
    ...
    "online":[
              ...
              {
               "type": "uri",
               "labels": { "fburl": true },
               "value": "http://www.example.com/busy/janedoe",
               "isPreferred": true
              },
              {
               "type": "uri",
               "labels": { "fburl": true },
               "value": "ftp://example.com/busy/project-a.ifb",
               "mediaType": "text/calendar"
              },
              ...
            ],
    ...
    }
        ]]></artwork>
              </figure>
          </section>

          <section title="CALADRURI">
              <t>The vCard CALADRURI element is represented in JSCard as a &quot;Resource&quot; item of the &quot;online&quot; array (<xref target="caladruri_mapping"/>). In the &quot;Resource&quot; item, the &quot;type&quot; member is set to &quot;uri&quot; as well as a key of the &quot;labels&quot; is set to &quot;caladruri&quot;.</t>
              <t>The PREF and MEDIATYPE parameters can be represented by the &quot;isPreferred&quot; and &quot;mediaType&quot; properties respectively.</t>

              <figure anchor="caladruri_mapping" title="CALADRURI mapping example">
                  <artwork xml:space="preserve"><![CDATA[
    BEGIN:VCARD
    VERSION:4.0
    ...
    CALADRURI;PREF=1:mailto:janedoe@example.com
    CALADRURI:http://example.com/calendar/jdoe
    ...
    END:VCARD

    {
    ...
    "online":[
              ...
              {
               "type": "uri",
               "labels": { "caladruri": true },
               "value": "mailto:janedoe@example.com",
               "isPreferred": true
              },
              {
               "type": "uri",
               "labels": { "caladruri": true },
               "value": "http://example.com/calendar/jdoe"
              },
              ...
            ],
    ...
    }
        ]]></artwork>
              </figure>
          </section>

          <section title="CALURI">
              <t>The vCard CALURI element is represented in JSCard as a &quot;Resource&quot; item of the &quot;online&quot; array (<xref target="caluri_mapping"/>). In the &quot;Resource&quot; item, the &quot;type&quot; member is set to &quot;uri&quot; as well as a key of the &quot;labels&quot; is set to &quot;caluri&quot;.</t>
              <t>The PREF and MEDIATYPE parameters can be represented by the &quot;isPreferred&quot; and &quot;mediaType&quot; properties respectively.</t>

              <figure anchor="caluri_mapping" title="CALURI mapping example">
                  <artwork xml:space="preserve"><![CDATA[
    BEGIN:VCARD
    VERSION:4.0
    ...
    CALURI;PREF=1:http://cal.example.com/calA
    CALURI;MEDIATYPE=text/calendar:ftp://ftp.example.com/calA.ics
    ...
    END:VCARD

    {
    ...
    "online":[
              ...
              {
               "type": "uri",
               "labels": { "caluri": true },
               "value": "http://cal.example.com/calA",
               "isPreferred": true
              },
              {
               "type": "uri",
               "labels": { "caluri": true },
               "value": "ftp://ftp.example.com/calA.ics",
               "mediaType": "text/calendar"
              },
              ...
            ],
    ...
    }
        ]]></artwork>
              </figure>
          </section>
      </section>

      <section title="Extended Properties">
        <t>If an extended property is a resource, JSCard already allows to represent it by setting the &quot;type&quot; property to &quot;other&quot; and specifying a value for the &quot;labels&quot; map.</t>
          <t>Any other property supporting a custom feature MAY be added and its name MUST be prefixed with a specific domain name to avoid conflict, e.g. &quot;example.com/customprop&quot;.</t>
      </section>

        <section title="JSCard Required Properties">
            <t>While converting a vCard into a JSCard, only the JSCard topmost &quot;uid&quot; property is required.</t>
        </section>

        <section title="JSCard Unmatched Properties">
            <t>The &quot;preferredContactMethod&quot; property doesn't match any vCard element.</t>
        </section>

    </section>

   <section anchor="IANA-considerations" title="IANA Considerations">
       <t>This document has no actions for IANA.</t>
   </section>

   <section anchor="security-considerations" title="Security Considerations">
       <t>This document doesn't report any security consideration.</t>
   </section>

  </middle>
  <back>
    <references title="Normative References">
      &RFC2119;
      &RFC6350;
      &RFC6473;
      &RFC6474;
      &RFC6715;
      &RFC6869;
      &RFC7095;
      &RFC8259;
      &RFC8605;
    </references>
    
    <references title="Informative References">
      <reference anchor="draft-ietf-jmap-jscontact" target="https://datatracker.ietf.org/doc/draft-ietf-jmap-jscontact/">
        <front><title>JSContact: A JSON representation of contact data</title>
          <author/>
          <date/>
        </front>
      </reference>
    </references>

  </back>
</rfc>
